{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IIITD PYQ Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --accent: #6366f1;
            --accent-hover: #818cf8;
            --success: #10b981;
            --card-bg: #1e293b;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Sidebar Navigation */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 250px;
            background: var(--bg-secondary);
            padding: 2rem;
            transform: translateX(0);
            transition: var(--transition);
            z-index: 1000;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 3rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            text-decoration: none;
            letter-spacing: 1px;
        }

        .nav-links {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .nav-links a:hover {
            background: var(--accent);
            color: var(--text-primary);
        }

        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 2rem;
            min-height: 100vh;
        }

        /* Hero Section */
        .hero {
            padding: 4rem 0;
            text-align: left;
            max-width: 800px;
        }

        .hero h1 {
            font-size: 3.5rem;
            line-height: 1.2;
            margin-bottom: 1.5rem;
            background: linear-gradient(45deg, var(--accent), var(--accent-hover));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            max-width: 600px;
        }

        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 4rem 0;
        }

        .feature-card {
            background: var(--card-bg);
            border-radius: 1rem;
            padding: 2rem;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
        }

        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--accent);
        }

        /* Button Styles */
        .cta-button {
            background: var(--accent);
            color: var(--text-primary);
            padding: 1rem 2rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .cta-button:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: var(--accent);
            border: none;
            padding: 0.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            z-index: 1001;
        }

        /* Footer */
        footer {
            background: var(--bg-secondary);
            padding: 2rem;
            text-align: center;
            color: var(--text-secondary);
            margin-left: 250px;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content, footer {
                margin-left: 0;
            }

            .mobile-menu-btn {
                display: block;
            }

            .hero h1 {
                font-size: 2.5rem;
            }
        }
        .visitor-card {
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 1rem;
            background-color: var(--card-bg);
            transition: var(--transition);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .visitor-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
        }
        
        .visitor-card h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--accent);
        }
        
        .visitor-card p {
            font-size: 1.2rem;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }
        
        .visitor-card .visitor-text {
            font-size: 1rem;
            color: var(--text-secondary);
        }.navbar {
            position: fixed;
            top: 0;
            right: 0;
            padding: 1rem 2rem;
            z-index: 1000;
            display: flex;
            align-items: center;
        }

        .navbar a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-primary);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            background: var(--accent);
            transition: var(--transition);
        }

        .navbar a:hover {
            background: var(--accent-hover);
        }

        /* Adjust main content padding to account for navbar */
        .main-content {
            margin-left: 250px;
            padding: 4rem 2rem 2rem;
            min-height: 100vh;
        }

        @media (max-width: 1024px) {
            .navbar {
                right: 4rem; /* Add space for mobile menu button */
            }
        }

            #visitor-counter {
              color: #4CAF50;
              font-size: 36px;
              font-weight: bold;
              text-shadow: 1px 1px 2px #000;
              margin-top: 20px;
            }

          

        
    </style>
</head>

<body>
    <nav class="sidebar">
        <div class="logo-container">
            <a href="#" class="logo">PYQ Hub</a>
        </div>
        <div class="nav-links">
            <a href="{% url 'welcome' %}">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                </svg>
                Home
            </a>
            {% comment %} <a href="#resources">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                </svg>
                Resources
            </a> {% endcomment %}
            <a href="{% url 'about' %}">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 16v-4"></path>
                    <path d="M12 8h.01"></path>
                </svg>
                About
            </a>
            <a href="{% url 'contact' %}">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <path d="M22 6l-10 7L2 6"></path>
                </svg>
                Contact
            </a>
        </div>
    </nav>
    <div class="navbar">
        {% if user.is_authenticated %}
    <a href="{% url 'logout' %}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M13 5l7 7-7 7"></path>
            <path d="M6 12H20"></path>
        </svg>
        Logout
    </a>
{% else %}
    <a href="{% url 'login' %}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path>
            <path d="M10 17l5-5-5-5v10z"></path>
        </svg>
        Login
    </a>
{% endif %}

    </div>
    

    <button class="mobile-menu-btn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>
   


    <main class="main-content">
        <section class="hero">
            <h1>Welcome to IIITD PYQ Hub</h1>
            <p>Your comprehensive resource for past year questions, study materials, and academic excellence at IIIT Delhi.</p>
            <div class="button-container">
                {% if user.is_authenticated %}
                    <a href="{% url 'subject_page' %}" class="cta-button">View Subjects</a>
                {% else %}
                    <a href="{% url 'login' %}" class="cta-button">Get Started</a>
                {% endif %}
            </div>
        </section>

        <div class="cards-grid">
            
            
            
            <div class="feature-card">
                <h3>Study Resources</h3>
                <p>Study resources like textbooks offer foundational knowledge, while online courses provide structured, interactive learning. Discussion forums help clarify doubts, and practicing Previous Year Questions (PYQs) helps familiarize with exam patterns and improve time management.</p>
            </div>
            <div class="feature-card">
                <h3>Upcoming Collaborative Problem Solving</h3>
                <p>Join forces with peers and mentors to address upcoming challenges, leveraging teamwork for innovative and effective solutions.</p>
            </div>
            <div class="visitor-card">
                <h3>Site Visited</h3>
                <div id="visitor-counter"  style="color:white">{{ visitor_count }} Times</div>
                <p class="visitor-text" style="color:white">Join the growing community of learners and achievers at IIITD PYQ Hub! </p>
            </div>
        </div>
    </main>

    <footer class="mt-5">
        <div class="container">
            <div class="footer-content">
                <div class="copyright">
                    <p class="mb-0">&copy; 2025 PYQ Hub. All rights reserved.</p>
                </div>
                <div class="social-links mt-3">
                    <a href="https://github.com/vipul0127" class="social-icon"><i class="fab fa-github"></i></a>
                    <a href="https://www.linkedin.com/in/vipul-iiitd-87840b308/" class="social-icon"><i class="fab fa-linkedin"></i></a>
                    <a href="https://vipul-iiitd.in/" class="social-icon"><i class="fas fa-globe"></i></a>
                    <a href="https://www.instagram.com/vipul_ydv__/" class="social-icon"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </footer>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/countup.js/2.6.0/countUp.min.js"></script>
<script>
    async function getVisitorCount() {
        try {
            const response = await fetch('/api/visitor-count/');
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const data = await response.json();
            return data.count;
        } catch (error) {
            console.error('Error fetching visitor count:', error);
            // Return the initial count from the template if API fails
            return parseInt(document.getElementById('visitor-counter').textContent) || 0;
        }
    }

    async function animateVisitorCount() {
        const count = await getVisitorCount();
        const options = {
            startVal: 0,
            duration: 2.5,
            useEasing: true,
            useGrouping: true,
        };

        const counter = new CountUp('visitor-counter', count, options);
        
        if (!counter.error) {
            counter.start();
        } else {
            console.error('Counter error:', counter.error);
            // Fallback to displaying the number without animation
            document.getElementById('visitor-counter').textContent = count.toString();
        }
    }

    // Start the animation when the page loads
    document.addEventListener('DOMContentLoaded', animateVisitorCount);
</script>
</body>
</html>